{
    "simple": {
        "code": "print('hello from lambda')",
        "testData": {}
    },
    "logistic_regression": {
        "code": "import json\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.metrics import accuracy_score\nimport numpy as np\n\nfeatures = np.array(testData.get('features'))\nlabels = np.array(testData.get('labels'))\ntest_features = np.array(testData.get('testFeatures'))\n\nmodel = LogisticRegression(max_iter=1000)\nmodel.fit(features, labels)\n\npreds = model.predict(test_features).tolist()\nacc = None\nif testData.get('testLabels') is not None:\n    acc = accuracy_score(testData['testLabels'], preds)\n\nprint(json.dumps({\"success\": True, \"result\": {\"predictions\": preds, \"accuracy\": acc}}))",
        "testData": {
            "features": [
                [
                    0,
                    0
                ],
                [
                    1,
                    1
                ],
                [
                    1,
                    0
                ],
                [
                    0,
                    1
                ]
            ],
            {
                "hello": {
                    "code": "def execute(testData):\n    print('hello from lambda')\n    return {'message': 'ok', 'echo': testData}",
                    "testData": {}
                },
                "logistic_regression": {
                    "code": "import numpy as np\nfrom sklearn.linear_model import LogisticRegression\n\ndef execute(testData):\n    X = np.array(testData['X'])\n    y = np.array(testData['y'])\n    clf = LogisticRegression(max_iter=200)\n    clf.fit(X, y)\n    preds = clf.predict(X).tolist()\n    return { 'predictions': preds }",
                    "testData": {
                        "X": [
                            [
                                0,
                                1
                            ],
                            [
                                1,
                                0
                            ],
                            [
                                1,
                                1
                            ],
                            [
                                0,
                                0
                            ]
                        ],
                        "y": [
                            1,
                            1,
                            1,
                            0
                        ]
                    }
                },
                "random_forest_proba": {
                    "code": "from sklearn.ensemble import RandomForestClassifier\nimport numpy as np\n\ndef execute(testData):\n    X = np.array(testData['X'])\n    y = np.array(testData['y'])\n    clf = RandomForestClassifier(n_estimators=10, random_state=42)\n    clf.fit(X, y)\n    proba = clf.predict_proba(X).tolist()\n    return { 'proba': proba }",
                    "testData": {
                        "X": [
                            [
                                0,
                                1
                            ],
                            [
                                1,
                                0
                            ],
                            [
                                1,
                                1
                            ],
                            [
                                0,
                                0
                            ]
                        ],
                        "y": [
                            1,
                            1,
                            1,
                            0
                        ]
                    }
                },
                "weighted_average_ksa": {
                    "code": "def execute(testData):\n    ksas = testData.get('ksas', [])\n    weights = testData.get('weights', {})\n    total = 0.0\n    weight_sum = 0.0\n    for item in ksas:\n        name = item['name']\n        score = float(item['score'])\n        w = float(weights.get(name, 1.0))\n        total += score * w\n        weight_sum += w\n    avg = (total / weight_sum) if weight_sum else 0.0\n    return { 'weighted_average': avg }",
                    "testData": {
                        "ksas": [
                            {
                                "name": "Python",
                                "score": 0.9
                            },
                            {
                                "name": "DataAnalysis",
                                "score": 0.8
                            },
                            {
                                "name": "ML",
                                "score": 0.85
                            }
                        ],
                        "weights": {
                            "Python": 1.2,
                            "DataAnalysis": 1.0,
                            "ML": 1.5
                        }
                    }
                }
            }
                [
                2,
                1
            ],
            [
                3,
                3
            ],
            [
                4,
                4
            ],
            [
                5,
                5
            ],
            [
                1,
                0
            ],
            [
                0,
                1
            ]
        ],
        "labels": [
            0,
            0,
            1,
            1,
            1,
            0,
            0
        ],
        "testFeatures": [
            [
                2,
                2
            ],
            [
                3,
                4
            ],
            [
                0,
                0
            ]
        ]
    }
},
"weighted_average_ksa": {
    "code": "import json\nscores = testData.get('scores', [])\nweights = testData.get('weights', {\"knowledge\": 0.3, \"skills\": 0.5, \"ability\": 0.2})\nwa = []\nfor s in scores:\n    wa.append(weights['knowledge']*s['knowledge'] + weights['skills']*s['skills'] + weights['ability']*s['ability'])\nresult = {\"stageWeighted\": wa, \"overall\": (sum(wa)/len(wa)) if wa else None}\nprint(json.dumps({\"success\": True, \"result\": result}))",
    "testData": {
        "scores": [
            {
                "knowledge": 0.7,
                "skills": 0.8,
                "ability": 0.7
            },
            {
                "knowledge": 0.8,
                "skills": 0.9,
                "ability": 0.8
            },
            {
                "knowledge": 0.9,
                "skills": 0.8,
                "ability": 0.9
            }
        ],
        "weights": {
            "knowledge": 0.22,
            "skills": 0.50,
            "ability": 0.28
        }
    }
}
}